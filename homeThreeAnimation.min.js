import*as THREE from"https://threejs.org/build/three.module.js";import TWEEN from"https://cdn.jsdelivr.net/npm/@tweenjs/tween.js@18.5.0/dist/tween.esm.js";import{OrbitControls}from"https://threejs.org/examples/jsm/controls/OrbitControls.js";import{STLLoader}from"https://threejs.org/examples/jsm/loaders/STLLoader.js";import{EffectComposer}from"https://threejs.org/examples/jsm/postprocessing/EffectComposer.js";import{RenderPass}from"https://threejs.org/examples/jsm/postprocessing/RenderPass.js";import{MaskPass,ClearMaskPass}from"https://threejs.org/examples/jsm/postprocessing/MaskPass.js";import{ShaderPass}from"https://threejs.org/examples/jsm/postprocessing/ShaderPass.js";import{BloomPass}from"https://threejs.org/examples/jsm/postprocessing/BloomPass.js";import{ClearPass}from"https://threejs.org/examples/jsm/postprocessing/ClearPass.js";import{CopyShader}from"https://threejs.org/examples/jsm/shaders/CopyShader.js";import{FXAAShader}from"https://threejs.org/examples/jsm/shaders/FXAAShader.js";var particleLineNetworkGroup,particleNetworkGroup,particleDataNetworkGroup,logoNetworkGroup,particleNetworkCount=60;let cameraNetwrok,sceneNetwork,rendererNetwork,canvasNetworkDom;var frameNetworkCount=238,nAngle=0;let particleCount=300;const r=350,rHalf=r/2;var logoStrengthGroup,particleStrengthGroup;let positions,colors,particles,pointCloud,particlePositions,linesMesh,cameraStrength,sceneStrengthWire,rendererStrength,sceneBg,canvasStrengthDom,composer,particlesData=[];function initThreeStrength(e,t,o){canvasStrengthDom=null==e?document.body:document.getElementsByClassName(e)[1],null==t&&(t=canvasStrengthDom.offsetWidth),null==o&&(o=canvasStrengthDom.offsetHeight);const n=t/o;(cameraStrength=new THREE.PerspectiveCamera(50,n,100,3e3)).position.x=0,cameraStrength.position.y=0,cameraStrength.position.z=500,cameraStrength.lookAt(0,0,0),sceneStrengthWire=new THREE.Scene,(sceneBg=new THREE.Scene).background=new THREE.Color(16316664),(rendererStrength=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),rendererStrength.setSize(t,o),rendererStrength.autoClear=!1,rendererStrength.shadowMap.enable=!0,rendererStrength.shadowMap.type=THREE.PCFSoftShadowMap,rendererStrength.interpolateneMapping=THREE.ACESFilmicToneMapping,canvasStrengthDom.appendChild(rendererStrength.domElement),logoStrengthGroup=new THREE.Group,particleStrengthGroup=new THREE.Group;const a=new OrbitControls(cameraStrength,rendererStrength.domElement);a.enableZoom=!1,a.enablePan=!1,a.mouseButtons={},(new STLLoader).load("https://uploads-ssl.webflow.com/61936e390cd7e0109be166bb/61d6a11e8797357e87d192d3_logo_svg.stl.txt",function(e){const t=new THREE.Mesh(e,new THREE.MeshBasicMaterial({transparent:!0,opacity:.3,color:2039583}));t.position.copy(new THREE.Vector3(-160,-40,0)),t.rotation.copy(new THREE.Euler(0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD)),t.castShadow=!0,t.receiveShadow=!0,t.name="logo_3d",t.scale.set(1,1,3),sceneStrengthWire.add(t);const r=new THREE.Mesh(e,new THREE.MeshBasicMaterial({transparent:!0,opacity:.1,color:2039583,wireframe:!0,wireframeLinewidth:.8,wireframeLinecap:"round"}));r.position.copy(new THREE.Vector3(-160,-40,0)),r.rotation.copy(new THREE.Euler(0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD)),r.castShadow=!0,r.receiveShadow=!0,r.name="logo_3d_wire",r.scale.set(1,1,3),sceneStrengthWire.add(r)});const i=particleCount*particleCount;positions=new Float32Array(3*i),colors=new Float32Array(3*i);const s=new THREE.PointsMaterial({color:11513775,size:5,blending:THREE.AdditiveBlending,transparent:!0,sizeAttenuation:!1});particles=new THREE.BufferGeometry,particlePositions=new Float32Array(3*particleCount);for(let e=0;e<particleCount;e++){const t=Math.random()*r-r/2,o=Math.random()*r-r/2,n=Math.random()*r-r/2;particlePositions[3*e]=t,particlePositions[3*e+1]=o,particlePositions[3*e+2]=n,particlesData.push({velocity:new THREE.Vector3(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1),numConnections:0})}particles.setDrawRange(0,particleCount),particles.setAttribute("position",new THREE.BufferAttribute(particlePositions,3).setUsage(THREE.DynamicDrawUsage)),pointCloud=new THREE.Points(particles,s),particleStrengthGroup.add(pointCloud);const c=new THREE.BufferGeometry;c.setAttribute("position",new THREE.BufferAttribute(positions,3).setUsage(THREE.DynamicDrawUsage)),c.setAttribute("color",new THREE.BufferAttribute(colors,3).setUsage(THREE.DynamicDrawUsage)),c.computeBoundingSphere(),c.setDrawRange(0,0);const l=new THREE.LineBasicMaterial({transparent:!0,opacity:.8,color:4144959});(linesMesh=new THREE.LineSegments(c,l)).visible=!0,particleStrengthGroup.add(linesMesh),particleStrengthGroup.visible=!0;const p=new ClearPass,d=new ClearMaskPass,w=new MaskPass(sceneStrengthWire,cameraStrength),h=(new BloomPass,new RenderPass(particleStrengthGroup,cameraStrength));h.clear=!1;const E=new RenderPass(sceneBg,cameraStrength),m=(new RenderPass(sceneStrengthWire,cameraStrength),new ShaderPass(CopyShader));m.renderToScreen=!0;const u=new ShaderPass(FXAAShader),g=rendererStrength.getPixelRatio();u.material.uniforms.resolution.value.x=1/(t*g),u.material.uniforms.resolution.value.y=1/(o*g);const R={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!0},k=new THREE.WebGLRenderTarget(t,o,R);(composer=new EffectComposer(rendererStrength,k)).addPass(p),composer.addPass(E),composer.addPass(w),composer.addPass(h),composer.addPass(d),composer.addPass(u),composer.addPass(m);const T=new THREE.DirectionalLight(16316664,.8);sceneStrengthWire.add(T)}function initThreeNetwork(e,t,r){canvasNetworkDom=null==e?document.body:document.getElementsByClassName(e)[0],null==t&&(t=canvasNetworkDom.offsetWidth),null==r&&(r=canvasNetworkDom.offsetHeight);const o=t/r;(cameraNetwrok=new THREE.PerspectiveCamera(50,o,300,3e3)).position.x=0,cameraNetwrok.position.y=-300,cameraNetwrok.position.z=1e3,cameraNetwrok.position.x=-200,cameraNetwrok.lookAt(0,0,0),(sceneNetwork=new THREE.Scene).background=new THREE.Color(16316664),(rendererNetwork=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),rendererNetwork.setSize(t,r),rendererNetwork.autoClear=!1,rendererNetwork.shadowMap.enable=!0,rendererNetwork.shadowMap.type=THREE.PCFSoftShadowMap,rendererNetwork.interpolateneMapping=THREE.ACESFilmicToneMapping,canvasNetworkDom.appendChild(rendererNetwork.domElement);const n=new OrbitControls(cameraNetwrok,rendererNetwork.domElement);n.enableZoom=!1,n.enablePan=!1,n.mouseButtons={},particleLineNetworkGroup=new THREE.Group,particleNetworkGroup=new THREE.Group,particleDataNetworkGroup=new THREE.Group,logoNetworkGroup=new THREE.Group;for(var a=0;a<particleNetworkCount;a++){const e=6*Math.PI*a/particleNetworkCount+(Math.random()*Math.PI/6-Math.PI/12),t=8*Math.PI*a/particleNetworkCount+(Math.random()*Math.PI/6-Math.PI/12),r=200*Math.random()+300,o=r*Math.sin(e)*Math.cos(t)*.8,n=r*Math.sin(e)*Math.sin(t)*.8,i=r*Math.cos(e)*.8,s=1.5*Math.random()+2;d(void 0,particleNetworkGroup,void 0,new THREE.Vector3(o,n,i),new THREE.Euler(0,0,0),s,9408399),d(void 0,particleDataNetworkGroup,void 0,new THREE.Vector3(o,n,i),new THREE.Euler(0,0,0),2,11513775)}for(a=0;a<particleNetworkCount;a++){for(var i=[],s=0;s<particleNetworkCount;s++){const e=particleNetworkGroup.children[a].position,t=particleNetworkGroup.children[s].position;a!=s&&i.push({i:a,j:s,d:p(e,t)})}i.sort((e,t)=>e.d-t.d);for(var c=2;c<6&&c<i.length;c++){const e=particleNetworkGroup.children[i[c].i].position,t=particleNetworkGroup.children[i[c].j].position,r=(new THREE.BufferGeometry).setFromPoints([new THREE.Vector3(e.x,e.y,e.z),new THREE.Vector3(t.x,t.y,t.z)]),o=new THREE.LineBasicMaterial({transparent:!0,opacity:.2,color:12566463}),n=new THREE.Line(r,o);particleLineNetworkGroup.add(n)}}(new STLLoader).load("https://uploads-ssl.webflow.com/61936e390cd7e0109be166bb/61d6a11e8797357e87d192d3_logo_svg.stl.txt",function(e){const t=new THREE.Mesh(e,new THREE.MeshBasicMaterial({transparent:!0,opacity:.5,color:2039583}));t.position.copy(new THREE.Vector3(-160,-40,0)),t.rotation.copy(new THREE.Euler(0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD)),t.castShadow=!0,t.receiveShadow=!0,t.name="logo_3d",t.scale.set(1,1,3),logoNetworkGroup.add(t);const r=new THREE.Mesh(e,new THREE.MeshBasicMaterial({transparent:!0,opacity:.2,color:2039583,wireframe:!0,wireframeLinewidth:.2,wireframeLinecap:"round"}));r.position.copy(new THREE.Vector3(-160,-40,0)),r.rotation.copy(new THREE.Euler(0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD,0*THREE.MathUtils.DEG2RAD)),r.castShadow=!0,r.receiveShadow=!0,r.name="logo_3d_wire",r.scale.set(1,1,3),logoNetworkGroup.add(r),logoNetworkGroup.rotation.y=Math.PI/18});const l=new THREE.AmbientLight(16316664,1);function p(e,t){const r=e.x-t.x,o=e.y-t.y,n=e.z-t.z,a=Math.sqrt(r*r+o*o+n*n),i=(e.x+t.x)/2,s=(e.y+t.y)/2;return i>=-160&&i<=160&&s>=-60&&s<=60?2*a:a}function d(e,t,r,o,n,a,i,s=null){null==s&&(s=new THREE.MeshBasicMaterial({color:i}));const c=new THREE.SphereGeometry(a),l=new THREE.Mesh(c,s);return l.position.copy(o),l.rotation.copy(n),l.castShadow=!0,l.receiveShadow=!0,l.geometry.computeVertexNormals(!0),null!=e&&(l.name=e),null!=t&&t.add(l),null!=r&&r.add(l),l}sceneNetwork.add(l),sceneNetwork.add(particleNetworkGroup),sceneNetwork.add(particleDataNetworkGroup),sceneNetwork.add(particleLineNetworkGroup),sceneNetwork.add(logoNetworkGroup)}function onWindowResize(){const e=canvasNetworkDom.clientWidth,t=canvasNetworkDom.clientHeight;cameraNetwrok.aspect=e/t,cameraNetwrok.updateProjectionMatrix(),cameraStrength.aspect=e/t,cameraStrength.updateProjectionMatrix(),rendererNetwork.setSize(e,t),rendererStrength.setSize(e,t)}function componentFromStr(e,t){var r=Math.max(0,parseInt(e,10));return t?Math.floor(255*Math.min(100,r)/100):Math.min(255,r)}function rgbToHex(e){var t,r="";return(t=/^rgb\(\s*(-?\d+)(%?)\s*,\s*(-?\d+)(%?)\s*,\s*(-?\d+)(%?)\s*\)$/.exec(e))&&(r=(componentFromStr(t[1],t[2])<<16)+(componentFromStr(t[3],t[4])<<8)+componentFromStr(t[5],t[6])),r}function animate(e){requestAnimationFrame(animate),rendererNetwork.clear(),rendererNetwork.render(sceneNetwork,cameraNetwrok),TWEEN.update(e),rendererStrength.clear(),composer.render(),rendererStrength.clearDepth(),rendererStrength.render(sceneStrengthWire,cameraStrength);const t=rgbToHex(document.body.getElementsByClassName("bottom-section-1")[0].style.backgroundColor),r=2039583==t?16316664:2039583;logoNetworkGroup&&(sceneNetwork.background=new THREE.Color(t)),logoNetworkGroup.children[0].material.color.setHex(r),logoNetworkGroup.children[1].material.color.setHex(r),sceneBg.background=new THREE.Color(t),linesMesh.material.color.setHex(r);let o=0,n=0,a=0;for(let e=0;e<particleCount;e++)particlesData[e].numConnections=0;for(let e=0;e<particleCount;e++){const t=particlesData[e];if(particlePositions[3*e]+=t.velocity.x,particlePositions[3*e+1]+=t.velocity.y,particlePositions[3*e+2]+=t.velocity.z,(particlePositions[3*e+1]<-rHalf||particlePositions[3*e+1]>rHalf)&&(t.velocity.y=-t.velocity.y),(particlePositions[3*e]<-rHalf||particlePositions[3*e]>rHalf)&&(t.velocity.x=-t.velocity.x),(particlePositions[3*e+2]<-rHalf||particlePositions[3*e+2]>rHalf)&&(t.velocity.z=-t.velocity.z),!(t.numConnections>=300))for(let r=e+1;r<particleCount;r++){const i=particlesData[r];if(i.numConnections>=300)continue;const s=particlePositions[3*e]-particlePositions[3*r],c=particlePositions[3*e+1]-particlePositions[3*r+1],l=particlePositions[3*e+2]-particlePositions[3*r+2],p=Math.sqrt(s*s+c*c+l*l);if(p<150){t.numConnections++,i.numConnections++;const s=1-p/5;positions[o++]=particlePositions[3*e],positions[o++]=particlePositions[3*e+1],positions[o++]=particlePositions[3*e+2],positions[o++]=particlePositions[3*r],positions[o++]=particlePositions[3*r+1],positions[o++]=particlePositions[3*r+2],colors[n++]=s,colors[n++]=s,colors[n++]=s,colors[n++]=s,colors[n++]=s,colors[n++]=s,a++}}}linesMesh.geometry.setDrawRange(0,2*a),linesMesh.geometry.attributes.position.needsUpdate=!0,linesMesh.geometry.attributes.color.needsUpdate=!0,pointCloud.geometry.attributes.position.needsUpdate=!0;const i=.001*Date.now();if(particleStrengthGroup.rotation.y=.1*i,++frameNetworkCount>240){frameNetworkCount=0;const e=particleDataNetworkGroup.children.length;for(var s=0;s<e;s++){const t=particleDataNetworkGroup.children[s].position,r=particleDataNetworkGroup.children[(s+1)%e].position,o={i:s,x:t.x,y:t.y,z:t.z},n=r.x,a=r.y,i=r.z;new TWEEN.Tween(o).to({i:s,x:n,y:a,z:i},2e3).easing(TWEEN.Easing.Quadratic.Out).onUpdate(()=>{particleDataNetworkGroup.children[o.i].position.x=o.x,particleDataNetworkGroup.children[o.i].position.y=o.y,particleDataNetworkGroup.children[o.i].position.z=o.z}).start()}}nAngle+=Math.PI/180,particleNetworkGroup.rotation.x=particleNetworkGroup.rotation.x+Math.PI/900*Math.sin(nAngle/50),particleNetworkGroup.rotation.z=particleNetworkGroup.rotation.z+Math.PI/900*Math.sin(nAngle/50),particleDataNetworkGroup.rotation.x=particleDataNetworkGroup.rotation.x+Math.PI/900*Math.sin(nAngle/50),particleDataNetworkGroup.rotation.z=particleDataNetworkGroup.rotation.z+Math.PI/900*Math.sin(nAngle/50),particleLineNetworkGroup.rotation.x=particleLineNetworkGroup.rotation.x+Math.PI/900*Math.sin(nAngle/50),particleLineNetworkGroup.rotation.z=particleLineNetworkGroup.rotation.z+Math.PI/900*Math.sin(nAngle/50)}initThreeStrength("three-container"),initThreeNetwork("three-container"),window.addEventListener("resize",onWindowResize),animate();